{
  "variables": {
    "img_name": "kic",
    "access_key": "{{env `ALI_ACCESS_KEY`}}",
    "secret_key": "{{env `ALI_SECRET_KEY`}}",
    "init_script": "https://pkgs-insk8s.oss-cn-chengdu.aliyuncs.com/kic-cross/{{user `version_kic`}}/kic",
    "disk_size": "35"
  },
  "builders": [
    {
            "type": "alicloud-ecs",
            "image_force_delete": true,
            "image_version": "v0.1.0",
            "access_key": "{{user `access_key`}}",
            "secret_key": "{{user `secret_key`}}",
            "region": "cn-chengdu",
            "source_image": "{{user `source_image`}}",
            "image_name": "kic",
            "instance_type": "ecs.s6-c1m4.xlarge",
            "system_disk_mapping": {
              "disk_size":
                "{{user `disk_size`}}"
            },
            "internet_charge_type": "PayByTraffic",
            "internet_max_bandwidth_out": 100,
            "ssh_username": "root",
            "ssh_password": "p@ssw0rd",
            "zone_id": "cn-chengdu-a"
    }
  ],
  "provisioners": [
    {
      "type": "shell",
      "inline": [
        "#rm -f ~/.bashrc",
        "rm -f /tmp/kic; wget -q {{user `init_script`}} -O /tmp/kic; chmod 755 /tmp/kic",
        "/tmp/kic cluster init"
      ]
    }
  ]
}