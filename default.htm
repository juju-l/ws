<!doctype html>
<html>
  <header>
    <title>test webSocket</title>
    <script src="https://code.jquery.com/jquery.js" type=""></script>
    <link rel="stylesheet" type="text/css" href="" />
  </header>
  <body>
    <div
      class="c-header"
      style="">
      </div>
    <div
      class="c-nav"
      style="">
      <pre style="" id="ready"></pre>
      </div>
    <div
      class="c-main"
      style="">
      <pre style="" id="t1"></pre>
      <pre style="font-size:17px;line-height:132%;border-width:7px 21px 7px 21px;border-style:double solid double solid;border-color:#ff0000 #0000ff #ff0000 #0000ff;background-color:#000;color:#ffff;white-space:pre-wrap;word-wrap:break-word" id="consoleShow"></pre>
      <pre style="" id="t2"></pre>
      <style><!--
      * {
        width: 100%;
        height: 100%;
        line-height: 100%;
        margin: 0 auto;
        padding: 0
      }
      body {
        /* min-width: 1002px;
        background-color: #ffffff;
        min-height: 521px; */
      }
      /*scroll-custom-webkit {
        -webkit-scrollbar: ; -webkit-scrollbar-button: ; -webkit-scrollbar-thumb: ; -webkit-scrollbar-track: ; -webkit-scrollbar-track-piece: ; -webkit-scrollbar-corner: ; -webkit-resizer: ;
      }*/
      .c-header {
        height: calc(23% - 47px - 6px)
      }
      .c-nav {
        margin: 3px auto;
        background-color: #cccccc;
        height: 47px
      }
      .c-main {
        margin: 0px auto;
        width: calc(100% - 19%);
        height: 60%
      }
      .c-fgx {
        margin: 3px auto;
        background-color: #ccc;
        height: 7px
      }
      .c-footer {
        height: calc(17% - 7px - 6px)
      }
      *::-webkit-scrollbar {
        width: 0px
      }
      pre {
        overflow-y: scroll;
        width: calc(100% - 42px);
        height: calc(100% - 14px);
        white-space: pre-wrap;
        word-wrap: break-word
      }
      div {
        /* display: flex;
        justify-content: center;
        align-items: center; */
      }
      --></style>
      <script>
        pre = document.getElementsByTagName("pre")
        ///
        var wss = new WebSocket("ws://"+self.location.host+"/?id={{.tstmp}}")
        wss.onmessage = function(e) {
          log = eval('('+e.data+')'); for (obj of pre) { if (log[obj.id]==undefined) {continue};obj.textContent += log[obj.id].match(/\n$/)!=null ? log[obj.id] : log[obj.id]+"\n";obj.scrollTop=obj.scrollHeight }; console.log(log)
        }
        ///console.log(wss.readyState)
        ///
        ///obj.scrollTop = obj.scrollHeight
      </script>
    </div>
    <div
      class="c-fgx"
      style="">
      <pre style="" id="call"></pre>
      </div>
    <div
      class="c-footer"
      style="">
      </div>
  </body>
</html>